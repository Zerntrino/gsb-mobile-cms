<div class="flex flex-col h-full">
  <app-nav title="จัดการผู้ใช้บัตร" [items]="navItems"></app-nav>

  <div class="flex-1 my-2 bg-white px-4 py-4">
    <div class="font-semibold">บัตรเครดิต</div>

    <div
      class="border border-gray-100 rounded-md px-8 py-6 flex items-center space-x-6"
    >
      <div class="">
        <img class="w-20 shadow-lg" [src]="cardS.cardImageUrl" />
      </div>
      <div class="flex-1">
        <div class="font-semibold">{{ cardS.accountNumber }}</div>
        <div class="text-sm">{{ cardS.cardTypeFlag }}</div>
      </div>
      <!-- <div class="">
        <div class="text-sm text-gray-400" style="text-align: end">
          คะแนนสะสม
        </div>
        <div class="font-semibold">9,900 คะแนน</div>
      </div> -->
    </div>

    <app-tab [tabs]="tabs" [index]="tab" (tabChange)="tab = $event"></app-tab>

    <div *ngIf="tab == 0" class="px-2">
      <div class="flex items-center space-x-2">
        <div class="flex-1 font-semibold">ประวัติการแลกคะแนน</div>
        <app-dropdown placeholder="สถานะ : ทั้งหมด" class="w-44"></app-dropdown>
        <app-dropdown placeholder="เดือน : ทั้งหมด" class="w-44"></app-dropdown>
        <app-dropdown placeholder="ปี : 2566" class="w-32"></app-dropdown>
      </div>

      <div class="my-4 table w-full">
        <div class="table-header-group">
          <div class="table-row">
            <div class="table-cell">#</div>
            <div class="table-cell">หมวดหมู่</div>
            <div class="table-cell">ประเภทการแลกคะแนน</div>
            <div class="table-cell text-center">คะแนนที่ใช้แลก</div>
            <div class="table-cell">ได้รับ</div>
            <div class="table-cell">วันที่ทำรายการ</div>
            <div class="table-cell">สถานะ</div>
          </div>
        </div>
        <div class="table-row-group">
          <div class="table-row" *ngFor="let r of rewards; let i = index">
            <div class="table-cell">{{ i + 1 }}</div>
            <div class="table-cell">{{ r.categoryName }}</div>
            <div class="table-cell">{{ r.rewardType }}</div>
            <div class="table-cell text-center">{{ r.redeemPoint }}</div>
            <div class="table-cell">{{ r.reward }}</div>
            <div class="table-cell">{{ dateFormat(r.transactionDate) }}</div>
            <div class="table-cell">
              <div *ngIf="r.isActive" class="flex space-x-2 items-center">
                <div class="w-2 h-2 rounded-full bg-green-500"></div>
                <div>กำลังใช้งาน</div>
              </div>
              <div *ngIf="!r.isActive" class="flex space-x-2 items-center">
                <div class="w-2 h-2 rounded-full bg-red-500"></div>
                <div>ไม่ใช้งาน</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <app-pagination
        [page]="page1"
        [totalPage]="totalPage1"
        (pageSizeChange)="pageSizeChange1($event)"
        (pageChange)="pageChange1($event)"
      ></app-pagination>
    </div>

    <div *ngIf="tab == 1" class="px-2">
      <div class="flex items-center space-x-2">
        <div class="flex-1 font-semibold">ประวัติการใช้โปรโมชัน</div>
        <app-dropdown placeholder="สถานะ : ทั้งหมด" class="w-44"></app-dropdown>
        <app-dropdown placeholder="เดือน : ทั้งหมด" class="w-44"></app-dropdown>
        <app-dropdown placeholder="ปี : 2566" class="w-32"></app-dropdown>
      </div>

      <div class="my-4 table w-full">
        <div class="table-header-group">
          <div class="table-row">
            <div class="table-cell">#</div>
            <div class="table-cell">หมวดหมู่</div>
            <div class="table-cell">ประเภทโปรโมชัน</div>
            <div class="table-cell">ชื่อโปรโมชัน</div>
            <div class="table-cell">วันที่ลงทะเบียน</div>
            <div class="table-cell">สถานะ</div>
          </div>
        </div>
        <div class="table-row-group">
          <div class="table-row" *ngFor="let p of promotions; let i = index">
            <div class="table-cell">{{ i + 1 }}</div>
            <div class="table-cell">{{ p.categoryName }}</div>
            <div class="table-cell">{{ p.promotionType }}</div>
            <div class="table-cell">{{ p.promotionName }}</div>
            <div class="table-cell">{{ dateFormat(p.regisDate) }}</div>
            <div class="table-cell">
              <div class="flex space-x-2 items-center">
                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                <div>กำลังใช้งาน</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <app-pagination
        [page]="page2"
        [totalPage]="totalPage2"
        (pageSizeChange)="pageSizeChange2($event)"
        (pageChange)="pageChange2($event)"
      ></app-pagination>
    </div>
  </div>
</div>
